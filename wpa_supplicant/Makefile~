CC = mips-openwrt-linux-uclibc-gcc
LD = mips-openwrt-linux-uclibc-ld
OBJS = script.o
#LINKOBJS = wpa_ctrl/wpa_ctrl.o wpa_ctrl/os_unix.o wpa_ctrl/log_sender.o wpa_ctrl/utils.o $(OBJS)
LINKOBJS = wpa_ctrl/wpa_ctrl.o wpa_ctrl/os_unix.o wpa_ctrl/utils.o $(OBJS)
TARGET = script

CFLAGS = -I/home/cwayembergh/Documents/openwrt/openwrt/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/include 
LDFLAGS = -L/home/cwayembergh/Documents/openwrt/openwrt/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/lib -Wl,-rpath-link=/home/cwayembergh/Documents/openwrt/openwrt/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/lib -lcrypto -lpthread
LIBS = 

all: $(TARGET)

wpactrl:
	make -C wpa_ctrl

$(TARGET): wpactrl $(OBJS)
	$(CC) $(LINKOBJS) $(CFLAGS) $(LDFLAGS) $(LIBS) -o $(TARGET)

clean:
	make -C wpa_ctrl clean
	rm -f $(OBJS) $(TARGET)

%.o: %.c
	$(CC) -c $(CFLAGS) $< -o $@
