% Chapter Template

\chapter{Analysis and Results - Active Monitoring} % Main chapter title

\label{Chapter6} % Change X to a consecutive number; for referencing this chapter elsewhere, use \ref{ChapterX}

\lhead{Chapter 6. \emph{Analysis and Results -  Active Monitoring}} % Change X to a consecutive number; this is for the header on each page - perhaps a shortened title

%----------------------------------------------------------------------------------------
%	SECTION 1
%----------------------------------------------------------------------------------------

%Trying to associate -> rejected some time -> status code = 12 ?
%ConnectÃ© et puis disconection abrupte -> code = 3 ?

%Limitations ?
%OpenSSL
%Aruba AP70 was originally designed to be a commercial AP instead of a wireless AM, its processing capability is limited: 266-MH MIPS 4Kc CPU, 28-MB RAM, and 8-MB flash memory storage
\section{Analysis}
The purpose of the active monitoring is, as mentioned before, to simulate a user on the network and make a bunch of tests in order to get a live overview of the network status. During the connection loop, data is gathered inserted into the log file. We have decided to focus on several metrics. As a reminder, here are the data we find into the log file.

\begin{itemize}
	\item [-] Scan results
	\item [-] APs tried \texttt{BSSIDs}
	\item [-] AP connected to \texttt{BSSID}
	\item [-] Time elapsed during the connection establishment
	\item [-] Time elapsed till an \texttt{IP} address is received
	\item [-] Services reachability results
\end{itemize}

In this chapter we discuss about the analysis and the findings we made after having deployed our active monitoring tool on the UCL's network. For each data collected, we detail the results we have and the analysis we can make with them. In the last section, we also explain the limitations we had to face during the development of this application.

% l environnement du router
% genre le signal des point d acces
% tu le pose quelque part et tu vois si la y a des AP avec un bon signal 
% tu dis que c est cool si tu veux voir si la connection d un endroit est bonne toute la journee
% si l environnement RF change etc

\section{Scanning}
The first part of the log file aggregates all the scan results performed by the supplicant before connecting to a network. Those information are quite interesting since they allow us to get live details about the current environment of the router. Thanks to those results we have a full overview of the signal strength of all the surrounding access points as well as their frequencies and the \texttt{SSID} they broadcast. By plotting these information on a graph we are able to make some analysis and conclusion.

On the following graph we can see how the signal of an access point is evolving during the day. 

[INSERT GRAPH HERE]



\section{Access Points Interactions}
During the connection establishment phase, the supplicant makes several interactions with the access points. The first interaction they have is in order for the supplicant to associate itself with one of the access points. 


%\subsection{Choice of the Access Point}
%The first thing our program does when it starts its connection loop is to perform a scan of the networks available where the probe is placed and to write the results inside the log file. Among the results and for each network we have decided to keep the network \texttt{BSSID}, the \texttt{Signal Strength} of the network and its \texttt{SSID}. Those data are interesting for our analysis. Indeed, when the router tries to get a connection, it first tries to associate with an Access Point. But there could be several APs in the area and he might be rejected from one or several of them. If its association request is rejected by one AP, \texttt{wpa\_supplicant} will try to associate with another one, and so on until the request is accepted. Our program gathers all the \texttt{BSSID} of the APs it had an association request with. 
%Comparing the scan results for each AP and the APs tried and the one it has a connection with is quite interesting. Indeed, after having performed several tests, we have observed that the device does not always connect to the best AP (i.e. the one with the best signal strength).



\subsection{Access Point Association}

\subsection{Association Rejected}


\subsection{Connection Establishments}

\subsection{Disconnection}




\section{Time Durations}
\subsection{DHCP Requests}



\section{Services Availability}








%(sometimes when the daemon gets a connection with an AP for one of the networks it might get abruptly disconnected from that AP but restarts automatically a new connection with another AP for the same network. We keep track of that)








\section{Limitations}




\section{Summary}
% Signaux
% Temps de connection
% Deconnection

 %https://chromium-review.googlesource.com/#/c/183720/
