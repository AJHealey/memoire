{% extends "analyse/wifi.html" %}
{% load staticfiles %}

{% block section %}
<div class="container" style='margin-top: 25px;'>
<form method="get"  action="{% url 'wifiProbes' %}" class="form-horizontal" role="form">
	<label for="selectedProbe" class="col-md-2 control-label">Probes</label>
	<div class="col-md-6">			
		<select class="form-control" name="selectedProbe" id="selectedProbe">
			<option value="" selected></option>
			{% if allProbe %}
			{% for p in allProbe %}
			<option value="{{p.id}}">{{p.macAddress}}</option>
			{% endfor %}
			{% endif %}
		</select>
	</div>
	<button type="submit" class="btn btn-default">
		<span class="glyphicon glyphicon-signal"></span> Get
	</button>
</form>
</div>

{%if probe%}
<div class="container" style='margin-top: 25px;'>
<h3>Probe</h3>
<dl class="dl-horizontal">
	<dt>Mac Address</dt>
	<dd>{{probe.macAddress}}</dd>
	<dt>802.11 Protocol</dt>
	<dd>{{probe.get_dot11protocol_display}}</dd>
</dl>
{%if lastScan%}
<h3>Last Scan Results <small>{{lastScan.date}}</small></h3>
<table class="table table-striped table-hover">
	<thead>
		<tr>
			<th>Access Point Name</th>
			<th>Mac Address</th>
			<th>Link</th>
			<th>Average Signal Strength</th>
			<th>Detected SSID</th>
			<th>Frequencies</th>
		</tr>
	</thead>
 	<tbody>
		{% for mac,ap in lastScan.results.items %}
		<tr>
			<td>{{ap.ap.name}}</td>
			<td>{{mac}}</td>
			<td>{{ap.ap.get_ethernetLinkSpeed_display}}</td>
			<td>{{ap.signalStrength}} dBm</td>
			<td>
				<ul class="list-unstyled">
					{%for ssid in ap.ssid%}
					<li>{{ssid}}</li>
					{%endfor%}
				</ul>
			</td>
			<td>
				<ul class="list-unstyled">
					{%for freq in ap.frequency%}
					<li>{{freq}} hz</li>
					{%endfor%}
				</ul>
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
</div>
{%endif%}
{%endif%}

{%endblock%}