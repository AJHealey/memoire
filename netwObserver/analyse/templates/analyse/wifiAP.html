{% extends "analyse/wifi.html" %}
{% load staticfiles %}

{% block section %}
<div class="container" style='margin-top: 25px;'>
<form method="post"  action="{% url 'wifiAP' %}" class="form-horizontal" role="form">
{% csrf_token %}
	<div class="form-group">
		<label for="selectedAP" class="col-md-2 control-label">Access Point</label>
		<div class="col-md-6">			
			<select class="form-control" name="selectedAP" id="selectedAP">
				<option value="" selected></option>
				{% if allAP %}
				{% for ap in allAP %}
				<option value="{{ap.id}}">{{ap.name}}</option>
				{% endfor %}
				{% endif %}
			</select>
		</div>
		<button type="submit" class="btn btn-default">
			<span class="glyphicon glyphicon-signal"></span> Get
		</button>
	</div>
</form>
</div>
{%if ap%}
<script type="text/javascript">
	google.load('visualization', '1.0', {'packages':['corechart']});
	google.setOnLoadCallback(drawBandwidthChart);

	function drawBandwidthChart() {
		
		var data = google.visualization.arrayToDataTable([
		  ['Time', 'Rx Speed', 'Tx Speed', 'Interface Speed'],
		  {%for date, rxspeed, txspeed in apBandwidth%}
		  [new Date({{date.year}},{{date.month}},{{date.day}},{{date.hour}},{{date.minute}},{{date.second}}), {{rxspeed}}, {{txspeed}}, {{ap.ethernetLinkSpeed}}],
		  {%endfor%}
		]);

		var options = {
		  title: 'Access Point Bandwidth',
		  curveType : 'function',
		};

		var chart = new google.visualization.LineChart(document.getElementById('bandwidthchart_div'));
		chart.draw(data, options);
	  }
</script>

{{ap.name}}


<div id="bandwidthchart_div" style="width: 900px; height: 500px;"></div>
{%endif%}
{%endblock%}